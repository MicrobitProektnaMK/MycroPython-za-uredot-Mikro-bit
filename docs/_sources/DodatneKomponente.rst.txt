==============================
Повезивање додатних компоненти
==============================

|


Велики број пројеката са применом микробита могуће је урадити без додатне опреме. Ипак, много је интересантније када
видимо да се нешто помера, засветли, када чујемо различите звуке.

На микробиту се, осим пет основних пинова, дуж ивице налази још двадесет мањих пинова, којима можемо приступити преко додатног конектора
(ивични, *edge connector*). Преко њих такође можемо управљати различитим уређајима, очитавати податке са бројних сензора. Могуће је,
уз додатне компоненте и напајања, управљати и уређајима који захтевају много већу снагу него што је сам микробит може пружити.

Примери које разматрамо углавном не захтевају додатну опрему. Ипак, представићемо неколико компоненти које нису скупе и лако се могу набавити 
(у продавници електронске опреме, преко интернета, од пријатеља). Употреба ових компоненти може да  учини пројекте још интересантнијим и да још 
јасније покаже колико је моћна, а у исто време једноставна примена програмирања и савремених технологија у решавању проблема из различитих области. 
Замислите шта се све може урадити са још разноврснијом и бољом опремом!


.. infonote::

	**На самом почетку израде било којег примера или пројекта са додатним компонентама, направите довољно места на радном столу и припремите сав потребан материјал, нацрте и шеме.** 
	
	**Пре него што прикључите батерије, добро проверите да приликом везивања нисте негде направили нежељене контакте!**

	**Немојте одустати ако уређај који сте замислили не проради из првог покушаја. Будите стрпљиви, усредсређени и систематични!**

|

Светлеће диоде
--------------

Светлећа диода (*LED - Light Emitting Diode*) има две ножице (електроде) - дужу, позитивну (аноду) и краћу, негативну (катоду). Ако желите да укључујете и искључујете светлећу диоду преко микробита, потребно је да је повежете тако да краћа ножица буде спојена на GND пин (уземљење, маса), 
а да дужа ножица добија позитиван напон са неког од пинова микробита. Ако диоду повезујете преко протоборда и не можете да уочите дужину ножица, свакако можете да приметите
мали зарез (засечени део) на самој глави диоде, који се налази на страни краће ножице. 

Радни напони црвене, жуте и зелене диоде се крећу између 1.8V и 2.2V (за белу и плаву су нешто већи).
На пиновима микробита добијамо напон 3.3V, па је неопходно да на ред са диодом повежемо (свеједно са које стране - према GND или према пину преко којег желимо да управљамо) и један отпорник (од 100Ω),
како бисмо ограничили струју која кроз њу протиче и спречили да прегори. О електричним колима учи се у осмом разреду.
За сада је довољно да запамтите да је неопходно да додамо и отпорник приликом везивања диоде, као што је приказано на слици испод.

|

.. image:: images/led.png
   :alt: led
   :align: center

|

За нешто сложеније пројекте биће нам потребно много проводника, обичних и са крокодил-штипаљкама. Ако желимо да смањимо број ових проводника,
можемо да употребимо *протоборд*. То је плочица са рупицама које су у унутрашњости међусобно спојене металним везама и омогућавају нам да
једноставно повежемо и тестирамо наше електрично коло (уређај). Правци међусобно повезаних рупица означени су жутом
линијом на слици. Водите рачуна да се не деси да кратко спојите неку компоненту, односно да је повежете дуж неког од тих праваца.

|

Потенциометар
-------------

.. image:: images/potenciometar.png
   :alt: potenciometar
   :scale: 20%
   :align: right
   
  
Потенциометар је променљиви отпорник који функционише као разделник напона, то јест омогућава нам да добијемо напон нижи од датог. Потенциометар може да се повеже на микробит уређај тако што се средњи контакт (ножица) веже на један од пинова 0, 1 или 2 по избору, а спољашње ножице на GND пин и 3V, као што је приказано на шеми.

Променом положаја клизача потенциометра, између његовог средњег контакта и масе добијају се различити напони од 0 до 3.3V, који се са пина на који је повезан средњи контакт очитавају у виду целобројних вредности од 0 до 1023. Програм може зависно од очитане вредности да задаје различите акције.

Потенциометар може бити веома користан у пројектима где је потребно смањивати или повећавати интензитет расвете, подешавати брзину обртања мотора, тестирати понашање програма за различите очитане вредности (ако у време тестирања немате сензор који касније желите да употребите) и многим другим.


|

Фото-отпорник
-------------

(*Photo Resistor*)

.. image:: images/fotootpornik.png
   :alt: fotootpornik
   :scale: 40%
   :align: left

Фото-отпорник може да послужи као додатни, прецизнији од оног којим располаже микробит, сензор за одређивање осветљености просторије.
Када није осветљен, његова отпорност је јако велика. Са повећањем осветљености његова отпорност нагло опада. 

На слици је приказано како можете повезати фото-отпорник са микробитом: један крај везујемо на неки од аналогних пинова микробита (у нашем случају пин 1), a други крај
на пин 3V. Потребно је још да између истог пина (пин 1) и масе (GND) ставимо и један отпорник (ми смо ставили отпорник вредности 10k) како бисмо
добили напонски разделник. 

Микробит не очитава промену отпорности фото-отпорника, већ промену напона на његовим крајевима. У програму се те вредности напона очитавају применом функције *read_analog(*), која враћа целобројне вредности од 0 до 1023.

Фото-отпорник је одличан за пројекте који се односе на уштеду електричне енергије, безбедносне системе са применом ласера и сличне.

|

Једносмерни мотори 
------------------

(*DC motor*)

Када су у питању једносмерни мотори, наша је препорука да, уколико желите да њима управљате преко микробита, обавезно користите додатно напајање. За већину мотора снага коју добијамо на излазима микробита није довољна за покретање. 
Зато препоручујемо да моторима управљате тако што ћете их повезати по следећој шеми:

.. image:: images/motor.png
   :alt: motor
   :scale: 80%
   :align: center

|

Један од начина да мотором управљамо преко микробита јесте да употребимо **транзистор** и додатно напајање (батеријe). 

.. image:: images/npn.png
   :alt: motor
   :scale: 80%
   :align: right

У зависности од типова полупроводника који сачињавају његову структуру, разликујемо два типа транзистора - NPN и PNP транзистор. 

Ми смо употребили биполарни транзистор NPN типа (*BC546, BC547, BC337*) који се у коло прикључује преко три ножице (електроде): емитера (E), базе (B) и колектора (C).

Основни принцип рада биполарног транзистора је да се напоном између две електроде - базе и емитера контролише струја која протиче кроз трећу електроду (колектор).

Када на базу овако повезаног транзистора доведемо позитиван напон са излаза микробита, кроз мотор (пумпу) ће преко колектора потећи струја.

Постоји још начина да управљате мотором преко микробита. Можете то учинити и преко релеја (водите рачуна да је предвиђен за рад на 3.3V). У сваком случају, а посебно ако желите да ваш мотор ради у два смера, препоручујемо вам, као најпоузданију опцију, 
да набавите баш за ту намену предвиђену додатну  микробит плочу за управљање моторима.

.. image:: images/pumpa.png
   :alt: pumpa
   :scale: 80%
   :align: center

Мини пумпу за воду (*Mini Submersible Water Pump*) повезујемо као и сваки други једносмерни мотор. Ова пумпица је веома применљива у пројектима повезаним са заштитом животне средине, 
узгајањем биљака, израдом чесми, украсних фонтана и сл.

|

Серво мотор
-----------

(*Micro Servo Motor SG90*)

Серво мотори су мотори код којих је могуће контролисати угаони положај. Углавном имају распон од 0 до 180 степени,
али има и оних који могу да се позиционирају и у распону од 360 степени.

.. image:: images/servo1.png
   :alt: servo1
   :scale: 40%
   :align: right

Серво моторе повезујемо помоћу три контакта (жице): црвене, браон и жуте. Ако желимо да управљамо овим мотором преко микробита, потребно је да
црвену жицу повежемо на позитиван напон (пин 3V), браон на GND, а жуту (сигналну) повежемо на један од пинова 0, 1, или 2.
На жалост, микробит без додатне опреме и напајања има снаге да покрене евентуално један
серво мотор, али је и то довољно да разумемо начин на који ради.


Треба имати у виду да је напон напајања већине серво мотора који се налазе на тржишту 4.8 - 6V. Иако ћете вероватно моћи да управљате серво мотором ако га повежете на малопре поменут начин, 
наш савет је да га ипак не напајате директно преко микробита. Ако сте у могућности, повежите га на неко додатно напајање (слика испод). Сигналну (жуту) жицу, као и у претходном случају,
повезујемо на неки од пинова микробита. 

|

.. infonote::

	**Сваки пут када повезујете неку компоненту на додатно напајање, било да је у питању сензор или неки извршни уређај (мотор, сијалица...), 
	обавезно је да повежeте GND пин микробита са масом (црном жицом, знак минус на батерији) додатног напајања!!!**

.. image:: images/servo2.png
   :alt: servo1
   :scale: 80%
   :align: center

|

Звучници и слушалице
--------------------

Микробит нема уграђене звучнике, али можемо врло једноставно да додамо екстерни звучник. Ако немате при руци звучник из неког старог уређаја
или системски звучник неког рачунара, одлично ће послужити и слушалице за мобилни телефон.

Начин везивања звучника и слушалица на микробит приказан је на слици.

|


.. image:: images/zvucnici.png
   :alt: zvucnici
   :scale: 70%
   :align: center


|

Црна жица звучника повезује се на GND пин микробита, а црвена на пин 0, преко којег ћемо слати сигнал за генерисање звукова различитих фреквенција.

Када су слушалице у питању, доњи део прикључка (најближи пластици) везујемо на GND пин, а врх прикључка на поменути пин.
Поступак програмирања мелодије је исти, без обзира преко чега планирамо да је слушамо.

|

Реле
----

(*3.3V 1 Channel 3V Relay Module*)

Струја и напон које добијамо на пиновима микробита често нису довољни за управљање уређајима који захтевају веће снаге. Један од начина да управљамо снажнијим уређајима јесте да употребимо додатно напајање, 
а отварање/затварање струјног кола препустимо микробит уређају, на који ћемо жељени уређај повезати преко **релеја**.

|

.. image:: images/rele.png
   :alt: rele
   :scale: 70%
   :align: center


|

Реле се на микробит повезује на следећи начин:


Са десне стране налазе се три ножице: Vcc повезујемо на 3V микробита, GND na GND микробита, а In ножица представља контакт за сигнал који ће 
укључивати/искључивати излаз зависно од вредности која се очита са пина микробита на који је повезана. Дакле, њу повезујемо на један од пинова 0, 1, или 2. 

На леву страну извршни уређај (мотор, сијалицу...) са додатним напајањем. Средњи пин (common) је заједнички, а да ли ћемо други крај потрошача (и редно везаног додатног напајања!) повезати на горњи или доњи пин, зависи од логике управљања коју желимо да применимо.

NO (normally opened – нормално отворен контакт, радни контакт) користимо када управљамо нормалном логиком (када је улазни сигнал 1 – уређај је укључен)

NC (normally closed – нормално затворен контакт, мирни контакт) служи за управљање инверзном, обрнутом логиком (када је на улазу 1 – треба искључити уређај, све док је на улазу 0 – уређај ради). Чест пример за примену мирног контакта јесте хаваријски стоп тастер (печурка) на индустријским машинама, који у случају притискања прекида струјно коло и зауставља рад машине.

У продаји се могу наћи и модули са 2, 4, 8 релеја, предвиђени за рад на различитим напонима. 
Приликом набавке, обратите пажњу да је реле који користите предвиђен за рад на 3V.

|

Сензор за дим
-------------

(*MQ-2 Flammable Gas & Smoke Sensor*)

За рад овог сензора није довољан напон од 3.3V, па смо га зато повезали на додатно напајање. Осим ножица за напајање, на сензору се 
налазе још две ножице означене са D0 i A0. Коју ћемо од њих повезати на микробит, зависи од самог проблема који разматрамо. 
На полеђини сензора налази се потенциометар помоћу којег можемо подесити
праг вредности, односно границу на коју ће сензор да реагује. Дакле, ако користимо ножицу D0 (D - дигитална вредност), микробит ће очитавати дигиталне 
вредности 0 (ако је очитао вредност мању од оне коју смо подесили потенциометром) или 1 (ако је та вредност већа).
Ножицу А0 (А - аналогна вредност) повезаћемо ако нам је за апликацију потребно да пратимо промене вредности очитаних са сензора, које могу да буду у распону од 0 до 1023.
 
.. image:: images/dim.png
   :alt: senzor za dim
   :scale: 70%
   :align: center

Осим за детектовање дима у просторији, овај сензор реагује и на алкохол, бутан, пропан, водоник, што вам сигурно може дати идеје за различите пројекте.

|

Сензор за покрет
----------------

(*HC-SR501 Infrared PIR*)

.. image:: images/pir.png
   :alt: pir senzor
   :scale: 70%
   :align: center

|

Као и сензор за дим који је претходно описан, сензор за покрет (PIR (*Passive Infrared*) сензор) такође захтева већи напон напајања (5V). Овај сензор има три ножице. GND и Vcc повезујемо на батерију 
(ако користите додатни ивични конектор за микробит повежите их на GND i пин 5V), а средњу ножицу везујемо на неки од аналогних пинова микробита 0, 1, или 2.

Како ради овај сензор? Он се састоји од два дела који региструју јачину инфрацрвеног зрачења. Наиме, сви предмети и бића емитују 
инфрацрвено зрачење одређене јачине. Топлији предмети јаче, хладнији слабије. Сензор, поредећи очитавања своја два дела уствари детектује разлику зрачења. Када се тело покрене у близини сензора, ова два очитавања ће се неједнако променити.
Када један део региструје више или мање зрачења од другог, активира се излаз.

На полеђини овог сензора налазе се два потенциометра помоћу којих можемо да подесимо осетљивост сензора (*Sensitivity*, до које ће удаљености да реагује) и колико ће дуго сензор да задржи излаз на високом нивоу када детектује покрет (*Delay time*). 
У неким случајевима могуће је детектовати покрет на удаљености и до седам метара.

**Напомене:** 

- Када се тек укључи сензор, потребно је оставити га неко време (најмање 30 секунди) да измери референтну вредност инфрацрвеног зрачења у просторији. Након овог периода биће спреман за употребу.
- Постоји могућност да се сензор напаја и директно са 3.3V, али поступак захтева лемљење, па смо зато предложили додатно напајање као једноставније решење.

|

Ултразвучни сензор
------------------

(*HC-SR04*)

Појаснимо најпре укратко шта је звук, а шта ултразвук. Таласи се кроз ваздух простиру осциловањем честица ваздуха. Те осцилације се преносе и на мембрану у нашем уху. Када је фреквенција овог осциловања у одређеном опсегу (до 20 KHz), онда то осциловање доживљавамо као звук, то јест чујемо га. Ултразвуком називамо таласе, односно осцилације чија је фреквенција сувише висока да бисмо били у стању да их чујемо. Дакле, звучни и ултразвучни таласи су по својој природи исти, а разликују се једино по људском доживљају тих таласа (једне чујемо а друге не).

Ултразвучни сензор емитује таласе високе фреквенције (ултразвучне таласе), који се, у случају да се испред сензора налази препрека одбијају и враћају ка њему. Време потребно да се региструје повратни сигнал пропорционално је растојању од сензора до препреке.

Овај сензор ради на 5V. Ако користите ивични конектор за микробит, на њему ћете пронаћи пин који обезбеђује овај напон. Ако нисте у прилици, послужиће и паковање од три батерије од по 1.5V. 

На ултразвучном сензору постоје четири ножице: Vcc, Trig, Echo и GND. Пинови Vcc и GND се повезују тако да сензор добије потребан напон (при томе GND пин треба повезати и са GND контактом на микробиту, као на слици). Trig i Echo пин можете повезати на пинове микробита по жељи (0, 1 или 2), с тим да исте пинове употребите и у програму. Иако је на интернету у бројним примерима Echo пин директно повезан на микробит, препоручујемо вам да, применом два отпорника, смањите напон тог повратног сигнала, као што је приказано на шеми (отпорници не морају имати исте вредности као наши, али међусобни однос њихових вредности треба да буде приближно исти као на слици).

.. image:: images/uz.png
   :alt: uz senzor
   :scale: 80%
   :align: center

|

Сензор за детекцију воде / кишних капи
--------------------------------------

(*Raindrop Detection Sensor*)

|

.. image:: images/senzor_kisa.png
   :alt: senzor kisa
   :scale: 60%
   :align: left

Овај сензор предвиђен је за рад на напонима од 3.3V до 5V, тако да за његов рад у примерима нисмо користили додатну батерију. Очитавање података са овог сензора је врло једноставно.
Користи се у пару са контролном плочицом која вам омогућава да пратите како аналогне, тако и дигиталне вредности, зависно од начина примене.

На контролној плочици налазе се две светлеће диоде - једна сигнализира да је сензор под напоном, а друга се укључује када сензор детектује воду, односно кишне капи.
За коју ће се вредност укључити ова светлећа диода, односно, на коју ће вредност одреаговати излаз сензора, зависи од постављене вредности коју подешавамо окретањем потенциометра
који се, такође, налази на овој плочици.

Логика овог сензора је обрнута, тако да, када детектује присуство воде на излазу даје логичку нулу, а у супротном даје вредност један.
  
Сензор се једноставно повезује на микробит. Vcc ножицу повезујемо на 3V микробита, GND спајамо са GND микробита, а у зависности од тога да ли желимо да пратимо ниво/количину течности (аналогне вредности)
или детектујемо да ли има/нема воде (дигиталне вредности), на неки од пинова 0, 1 или 2 повезаћемо А0 (аналогну) или D0 (дигиталну) ножицу сензора.

Примена је разноврсна - од праћења временских прилика, одржавања нивоа течности, до различитих безбедносних система (цурење воде из цеви и слично)

|

Проверите знање
...............

|

**Питање 1: Мали зарез (одсечени део) на глави диоде налази се на страни:**

.. mchoice:: q3_1
    :answer_a:	краће ножице која се везује на GND микробита
    :answer_b:	не значи ништа, то је фабричка грешка
    :answer_c:	дуже ножице која се везује на GND микробита
    :answer_d:	дуже ножице која се везује на 3V микробита
    :correct: a
    :feedback_a: Тако је, зарез се налази изнад краће ножице, која представља негативан крај диоде и везује се на GND пин микробита.
    :feedback_b: Одговор није тачан, покушајте поново!
    :feedback_c: Одговор није тачан, покушајте поново!
    :feedback_d: Одговор није тачан, покушајте поново!

|

**Питање 2: Ако уз диоду не повежемо редно и одговарајући отпорник, ...**

.. mchoice:: q3_2
    :answer_a:	... диода неће светлети
    :answer_b:	... диода може да прегори
    :answer_c:	... диоду треба повезати обрнуто
    :answer_d:	... диода ће слабије светлети
    :correct: b
    :feedback_a: Одговор није тачан, покушајте поново!
    :feedback_b: Тако је, редно везани отпорник смањиће јачину струје кроз светлећу диоду.
    :feedback_c: Одговор није тачан, покушајте поново!
    :feedback_d: Одговор није тачан, покушајте поново!

|

**Питање 3: За управљање серво мотором, потребно је повезати:**

.. mchoice:: q3_3
    :answer_a:	4 жице (проводника)
    :answer_b:	3 жице (проводника)
    :answer_c:	2 жице (проводника)
    :answer_d:	1 жицу (проводник)
    :correct: b
    :feedback_a: Одговор није тачан, покушајте поново!
    :feedback_b: Серво мотор на себи има три жице - браон, црвену и жуту које повезујемо на напајање и неки од пинова како бисмо њиме управљали.
    :feedback_c: Одговор није тачан, покушајте поново!
    :feedback_d: Одговор није тачан, покушајте поново!

|

**Питање 4: Када повезујемо серво мотор са микробитом, жуту жицу серво мотора везујемо:**

.. mchoice:: q3_4
    :answer_a:	на неки од пинова 0, 1, 2
    :answer_b:	на 3V
    :answer_c:	на GND
    :answer_d:	искључиво преко додатног конектора на неки од мањих пинова
    :correct: a
    :feedback_a: Ово је тачан одговор, жута жица је сигнална и везује се на пин 0, 1 или 2 (уколико немамо додатни конектор да приступимо осталим пиновима)
    :feedback_b: Одговор није тачан, покушајте поново!
    :feedback_c: Одговор није тачан, покушајте поново!
    :feedback_d: Одговор није тачан, покушајте поново!

|

**Питање 5: Да ли је могуће да микробит истовремено управља са три серво мотора?**

.. mchoice:: q3_5
    :answer_a:	Могуће је без икаквих проблема!
    :answer_b:	Немогуће је повезати толико мотора на микробит.
    :answer_c:	Могуће је, али не без додатног напајања или компоненти, јер микробит нема довољно снаге.
    :answer_d:	Могуће је физички, али не постоји програмско решење.
    :correct: c
    :feedback_a: Одговор није тачан, покушајте поново!
    :feedback_b: Одговор није тачан, покушајте поново!
    :feedback_c: Тако је, постоји више начина да се ово изведе, али не без неких додатних компоненти и додатног напајања
    :feedback_d: Одговор није тачан, покушајте поново!

|

**Питање 6: Ако желимо да чујемо мелодију са микробита, део конектора од слушалица или неког звучника који је најближи пластици повезујемо на:**

.. mchoice:: q3_6
    :answer_a:	GND пин на микробиту.
    :answer_b:	на било који од пинова
    :answer_c:	на 3V
    :answer_d:	Није могуће чути звук са микробита.
    :correct: a
    :feedback_a: Ово је тачан одговор!
    :feedback_b: Одговор није тачан, покушајте поново!
    :feedback_c: Одговор није тачан, покушајте поново!
    :feedback_d: Одговор није тачан, покушајте поново!


